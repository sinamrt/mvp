(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{2790:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return a(7705)}])},7705:(e,s,a)=>{"use strict";a.r(s),a.d(s,{__N_SSP:()=>d,default:()=>c});var r=a(7876),t=a(4232),l=a(553),i=a(9099),n=a(8230),o=a.n(n),d=!0;function c(){let[e,s]=(0,t.useState)({name:"",email:"",password:"",confirmPassword:""}),[a,n]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[w,f]=(0,t.useState)(!1),g=(0,i.useRouter)();(0,t.useEffect)(()=>{n(!0)},[]);let x=e=>{let{name:a,value:r}=e.target;s(e=>({...e,[a]:r})),p(""),f(!1)},j=async s=>{if(s.preventDefault(),c(!0),p(""),f(!1),e.password!==e.confirmPassword){p("Passwords don't match!"),c(!1);return}try{let s=await (0,l.signIn)("credentials",{email:e.email,password:e.password,name:e.name,redirect:!1});if(null==s?void 0:s.error)p(s.error),c(!1);else{let e=document.querySelector('[data-testid="success-message"]');e&&(e.style.display="block"),setTimeout(()=>g.push("/diet-form"),500)}}catch(e){console.error("Registration error:",e),f(!0),c(!1)}},N=e=>{(0,l.signIn)(e,{callbackUrl:"/diet-form"})};if(!a)return(0,r.jsx)("div",{className:"page-loading","data-testid":"loading-spinner",children:(0,r.jsx)("div",{className:"spinner"})});let v=e=>{if(e.length<8)return"weak";let s=/[A-Z]/.test(e),a=/[a-z]/.test(e),r=[s,a,/\d/.test(e),/[!@#$%^&*(),.?":{}|<>]/.test(e)].filter(Boolean).length;return r<=2?"weak":3===r?"medium":"strong"},b=e=>e?"true":"false";return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"auth-form",children:[(0,r.jsxs)("div",{className:"form-header",children:[(0,r.jsx)("h1",{className:"form-title",children:"Create Your Account"}),(0,r.jsx)("p",{className:"form-subtitle",children:"Join MEALS4V to get personalized meal plans tailored to your preferences and goals."})]}),(0,r.jsxs)("form",{onSubmit:j,noValidate:!0,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"name",className:"form-label required",children:"Full Name"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:x,className:"form-input",required:!0,maxLength:100,"data-testid":"name","aria-invalid":b(!e.name)})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label required",children:"Email Address"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:x,className:"form-input",required:!0,"data-testid":"email","aria-invalid":b(!!e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))}),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(0,r.jsx)("span",{className:"error-message","data-testid":"email-error",role:"alert",children:"Please enter a valid email address"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"password",className:"form-label required",children:"Password"}),(0,r.jsxs)("div",{className:"password-input-wrapper",children:[(0,r.jsx)("input",{type:m?"text":"password",id:"password",name:"password",value:e.password,onChange:x,className:"form-input",required:!0,minLength:8,"data-testid":"password","aria-invalid":b(e.password.length<8)}),(0,r.jsx)("button",{type:"button",onClick:()=>u(!m),className:"password-toggle","data-testid":"toggle-password","aria-label":m?"Hide password":"Show password",children:m?"Hide":"Show"})]}),e.password&&(0,r.jsxs)("div",{"data-testid":"password-strength",className:"password-strength ".concat(v(e.password)),children:["Password Strength: ",v(e.password)]}),(0,r.jsxs)("div",{"data-testid":"password-requirements",className:"password-requirements",children:["Password must:",(0,r.jsxs)("ul",{role:"list",children:[(0,r.jsx)("li",{className:e.password.length>=8?"met":"",children:"Be at least 8 characters"}),(0,r.jsx)("li",{className:/[A-Z]/.test(e.password)?"met":"",children:"Include uppercase letter"}),(0,r.jsx)("li",{className:/\d/.test(e.password)?"met":"",children:"Include number"}),(0,r.jsx)("li",{className:/[!@#$%^&*(),.?":{}|<>]/.test(e.password)?"met":"",children:"Include special character"})]})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"form-label required",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:x,className:"form-input",required:!0,minLength:8,"data-testid":"confirm-password","aria-invalid":b(!!e.confirmPassword&&e.password!==e.confirmPassword)}),e.confirmPassword&&e.password!==e.confirmPassword&&(0,r.jsx)("span",{className:"error-message","data-testid":"password-match-error",role:"alert",children:"Passwords do not match"})]}),(0,r.jsx)("button",{type:"submit",className:"form-btn form-btn-primary",disabled:d,"data-testid":"register-button",children:d?(0,r.jsx)("span",{"data-testid":"loading-spinner",className:"spinner-small"}):"Create Account"}),h&&(0,r.jsx)("div",{"data-testid":"error-message",className:"error-message",role:"alert",children:h}),w&&(0,r.jsx)("div",{"data-testid":"network-error",className:"error-message",role:"alert",children:"Network error. Please check your connection."}),(0,r.jsx)("div",{"data-testid":"success-message",className:"success-message",style:{display:"none"},role:"alert",children:"Registration successful! Redirecting..."})]}),(0,r.jsxs)("div",{className:"oauth-section",children:[(0,r.jsx)("div",{className:"oauth-divider",children:(0,r.jsx)("span",{children:"or continue with"})}),(0,r.jsxs)("button",{onClick:()=>N("google"),className:"oauth-btn oauth-btn-google",type:"button",children:[(0,r.jsxs)("svg",{className:"oauth-icon",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,r.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,r.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,r.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,r.jsx)("button",{onClick:()=>N("github"),className:"oauth-btn oauth-btn-github",type:"button",children:"Continue with GitHub"}),(0,r.jsxs)("p",{children:["By creating an account, you agree to our ",(0,r.jsx)(o(),{href:"/terms",children:"Terms of Service"})," and ",(0,r.jsx)(o(),{href:"/privacy",children:"Privacy Policy"}),"."]})]})]})})}},9099:(e,s,a)=>{e.exports=a(4294)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=2790)),_N_E=e.O()}]);